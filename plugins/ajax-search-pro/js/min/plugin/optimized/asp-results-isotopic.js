(function(b){let f=window.WPD.ajaxsearchpro.helpers;b.fn.extend(window.WPD.ajaxsearchpro.plugin,{showIsotopicResults:function(){if(1==this._no_animations)return this.showResultsBox(),this.addAnimation(),this.searching=!1,!0;this.preProcessIsotopicResults();this.showResultsBox();0<this.n.items.length&&(this.n.results.css({height:"auto"}),1==this.o.highlight&&b("div.item",this.n.resultsDiv).highlight(this.n.text.val().split(" "),{element:"span",className:"highlighted",wordsOnly:this.o.highlightWholewords}));
0==this.call_num&&this.calculateIsotopeRows();this.showPagination();this.isotopicPagerScroll();if(0==this.n.items.length)this.n.results.css({height:"11110px"}),this.n.results.css({height:"auto"}),this.n.resdrg.css({height:"auto"});else if("undefined"!==typeof rpp_isotope){if(null!=this.isotopic&&"undefined"!=typeof this.isotopic.destroy&&0==this.call_num&&this.isotopic.destroy(),0==this.call_num||null==this.isotopic)this.isotopic=new rpp_isotope("#ajaxsearchprores"+this.o.rid+" .resdrg",{isOriginLeft:!b("body").hasClass("rtl"),
itemSelector:"div.item",layoutMode:"masonry",filter:this.filterFns.number,masonry:{gutter:this.o.isotopic.gutter}})}else return!1;this.addAnimation();this.initOverlayEvent();this.initIsotopicClick();this.searching=!1},initIsotopicClick:function(){let a=this;a.eh.isotopicClickhandle=a.eh.isotopicClickhandle||function(c){if(!a.dragging){let e=b(this).find(".asp_content a"),d=e.attr("href");""!==d&&(c.preventDefault(),2==c.which||"_blank"==e.attr("target")?f.openInNewTab(d):location.href=d)}};a.n.resultsDiv.find(".asp_isotopic_item").on("click",
a.eh.isotopicClickhandle)},preProcessIsotopicResults:function(){let a=this,c=0,e="";a.o.isotopic.showOverlay&&0<a.n.aspItemOverlay.length&&(e=a.n.aspItemOverlay.get(0).outerHTML);a.n.items.forEach(function(d){let h="";var g=0<b(d).find(".asp_image").length,k=b(d).find(".asp_image");g&&(g=k.data("src"),k=a.o.isotopic.blurOverlay&&!f.isMobile()?"aspblur":"no_aspblur",h=b("<div data-src='"+g+"' ></div>"),"undefined"==typeof WPD.lazy&&h.css({"background-image":"url("+g+")"}),h.css({filter:"url(#"+k+")",
"-webkit-filter":"url(#"+k+")","-moz-filter":"url(#"+k+")","-o-filter":"url(#"+k+")","-ms-filter":"url(#"+k+")"}).addClass("asp_item_overlay_img asp_lazy"),h=h.get(0).outerHTML);b(d).prepend(h+e+"");b(d).attr("data-itemnum",c);c++})},isotopicPagerScroll:function(){if(0>=b("nav>ul li.asp_active",this.n.resultsDiv).length)return!1;var a=b("nav>ul li.asp_active",this.n.resultsDiv).offset().left;let c=b("nav>ul li.asp_active",this.n.resultsDiv).outerWidth(!0),e=b("nav>a.asp_next",this.n.resultsDiv).offset().left;
var d=b("nav>a.asp_prev",this.n.resultsDiv).offset().left;0>=c||(d=Math.ceil((d-a+2*c)/c),0<d?0==b("nav>ul li.asp_active",this.n.resultsDiv).prev().length?b("nav>ul",this.n.resultsDiv).css({left:c+"px"}):b("nav>ul",this.n.resultsDiv).css({left:b("nav>ul",this.n.resultsDiv).position().left+c*d+"px"}):(a=0==b("nav>ul li.asp_active",this.n.resultsDiv).next().length?Math.ceil((a-e+c)/c):Math.ceil((a-e+2*c)/c),0<a&&b("nav>ul",this.n.resultsDiv).css({left:b("nav>ul",this.n.resultsDiv).position().left-c*
a+"px"})))},showPagination:function(a){a="undefined"!==typeof a?a:!1;if(!this.o.isotopic.pagination)return null!=this.isotopic&&a&&this.isotopic.arrange({transitionDuration:0,filter:this.filterFns.number}),!1;(1>this.call_num||a)&&b("nav.asp_navigation ul li",this.n.resultsDiv).remove();b("nav.asp_navigation",this.n.resultsDiv).css("display","none");if(0<this.n.items.length){var c=1;0<this.call_num&&!a&&(c=this.n.resultsDiv.find("nav.asp_navigation ul li").length+1);let e=Math.ceil(this.n.items.length/
this.il.itemsPerPage);if(1<e){let d=a&&0<this.il.lastVisibleItem?Math.ceil(this.il.lastVisibleItem/this.il.itemsPerPage):1;for(d=0>=d?1:d;c<=e;c++)c==d?b("nav.asp_navigation ul",this.n.resultsDiv).append("<li class='asp_active'><span>"+c+"</span></li>"):b("nav.asp_navigation ul",this.n.resultsDiv).append("<li><span>"+c+"</span></li>");b("nav.asp_navigation",this.n.resultsDiv).css("display","block");a?b("nav.asp_navigation ul li.asp_active",this.n.resultsDiv).trigger("click_trigger"):b("nav.asp_navigation ul li.asp_active",
this.n.resultsDiv).trigger("click")}else null!=this.isotopic&&a&&this.isotopic.arrange({transitionDuration:0,filter:this.filterFns.number})}},hidePagination:function(){b("nav.asp_navigation",this.n.resultsDiv).css("display","none")},visiblePagination:function(){return"none"!=b("nav.asp_navigation",this.n.resultsDiv).css("display")},calculateIsotopeRows:function(){let a=this;let c;var e=parseFloat(a.n.results.width());if("desktop"===f.deviceType()){var d=f.getWidthFromCSSValue(a.o.isotopic.itemWidth,
e);c=f.getWidthFromCSSValue(a.o.isotopic.itemHeight,e)}else"tablet"===f.deviceType()?(d=f.getWidthFromCSSValue(a.o.isotopic.itemWidthTablet,e),c=f.getWidthFromCSSValue(a.o.isotopic.itemHeightTablet,e)):(d=f.getWidthFromCSSValue(a.o.isotopic.itemWidthPhone,e),c=f.getWidthFromCSSValue(a.o.isotopic.itemHeightPhone,e));let h=a.o.isotopic.gutter,g=Math.floor(e/d);0>=g&&(g=1);Math.abs(e/g-d)>Math.abs(e/(g+1)-d)&&g++;e=e/g-(g-1)*h/g;d=e/d*c;a.il.columns=g;a.il.itemsPerPage=g*a.il.rows;a.il.lastVisibleItem=
0;a.n.results.find(".asp_isotopic_item").forEach(function(k,l){"none"!=b(k).css("display")&&(a.il.lastVisibleItem=l)});isNaN(a.il.columns)||isNaN(a.il.itemsPerPage)||(a.n.resultsDiv.data("colums",a.il.columns),a.n.resultsDiv.data("itemsperpage",a.il.itemsPerPage));a.currentPage=1;a.n.items.css({width:Math.floor(e)+"px",height:Math.floor(d)+"px"})}})})(WPD.dom);
(function(b){let f=window.WPD.ajaxsearchpro.helpers;b.fn.extend(window.WPD.ajaxsearchpro.plugin,{initIsotopicPagination:function(){let a=this;a.n.resultsDiv.on(a.clickTouchend+" click_trigger","nav>a",function(c){c.preventDefault();c.stopImmediatePropagation();c=b(this).closest("nav").find("li.asp_active");"next"==(b(this).hasClass("asp_prev")?"prev":"next")?0<c.next("li").length?c.next("li").trigger("click"):b(this).closest("nav").find("li").first().trigger("click"):0<c.prev("li").length?c.prev("li").trigger("click"):
b(this).closest("nav").find("li").last().trigger("click")});a.n.resultsDiv.on(a.clickTouchend+" click_trigger","nav>ul li",function(c){c.preventDefault();c.stopImmediatePropagation();let e=c.type,d=this;c=1;f.isMobile()&&(a.n.text.trigger("blur"),c=300);setTimeout(function(){a.currentPage=parseInt(b(d).find("span").html(),10);b("nav>ul li",a.n.resultsDiv).removeClass("asp_active");b("nav",a.n.resultsDiv).each(function(h){b(b(h).find("ul li").get(a.currentPage-1)).addClass("asp_active")});"click_trigger"===
e?a.isotopic.arrange({transitionDuration:0,filter:a.filterFns.number}):a.isotopic.arrange({transitionDuration:400,filter:a.filterFns.number});a.isotopicPagerScroll();a.removeAnimation();"undefined"!=typeof WPD.lazy&&document.dispatchEvent(new Event("wpd-lazy-trigger"));a.n.resultsDiv.trigger("nav_switch")},c)})},initOverlayEvent:function(){let a=this;"isotopic"==a.o.resultstype&&a.o.isotopic.showOverlay&&!f.detectIOS()&&(a.eh.enterOverlay=a.eh.enterOverlay||function(){b(this).find(".asp_item_overlay").css("opacity",
1);0<b(this).find(".asp_image").length&&(a.o.isotopic.blurOverlay&&b(this).find(".asp_item_overlay_img").css("opacity",1),a.o.isotopic.hideContent&&b(this).find(".asp_content").css("bottom",-b(this).find(".asp_content").outerHeight()+"px"))},a.eh.leaveOverlay=a.eh.leaveOverlay||function(){b(this).find(".asp_item_overlay").css("opacity",0);0<b(this).find(".asp_image").length&&(a.o.isotopic.blurOverlay&&b(this).find(".asp_item_overlay_img").css("opacity",0),a.o.isotopic.hideContent&&b(this).find(".asp_content").css("bottom",
"0px"))},a.eh.enterAnimate=a.eh.enterAnimate||function(){b(this).addClass("animated pulse")},a.eh.leaveAnimate=a.eh.leaveAnimate||function(){b(this).removeClass("animated pulse")},a.n.resultsDiv.find("div.item").on("mouseenter",a.eh.enterOverlay),a.n.resultsDiv.find("div.item").on("mouseleave",a.eh.leaveOverlay),a.n.resultsDiv.find("div.asp_item_inner").on("mouseenter",a.eh.enterAnimate),a.n.resultsDiv.find("div.asp_item_inner").on("mouseleave",a.eh.leaveAnimate))}})})(WPD.dom);
(function(b){b.fn.extend(window.WPD.ajaxsearchpro.plugin,{initNavigationEvents:function(){let f=this,a=function(c){let e=c.keyCode||c.which;if(0<b(".item",f.n.resultsDiv).length&&"none"!=f.n.resultsDiv.css("display")&&"vertical"==f.o.resultstype){if(40==e||38==e){var d=f.n.resultsDiv.find(".item.hovered");f.n.text.trigger("blur");0==d.length?f.n.resultsDiv.find(".item").first().addClass("hovered"):(40==e&&(0==d.next(".item").length?f.n.resultsDiv.find(".item").removeClass("hovered").first().addClass("hovered"):
d.removeClass("hovered").next(".item").addClass("hovered")),38==e&&(0==d.prev(".item").length?f.n.resultsDiv.find(".item").removeClass("hovered").last().addClass("hovered"):d.removeClass("hovered").prev(".item").addClass("hovered")));c.stopPropagation();c.preventDefault();f.n.resultsDiv.find(".resdrg .item.hovered").inViewPort(50,f.n.resultsDiv.get(0))||(d=f.n.resultsDiv.find(".resdrg .item.hovered").get(0),null!=d&&"undefined"!=typeof d.scrollIntoView&&d.scrollIntoView({behavior:"smooth",block:"start",
inline:"nearest"}))}13==e&&0<b(".item.hovered",f.n.resultsDiv).length&&(c.stopPropagation(),c.preventDefault(),b(".item.hovered a.asp_res_url",f.n.resultsDiv).get(0).click())}};f.documentEventHandlers.push({node:document,event:"keydown",handler:a});b(document).on("keydown",a)}})})(WPD.dom);
